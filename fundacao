<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Sapatas 2026 - Completa</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f7f6; padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; text-align: center; margin-bottom: 25px; }
        .setup-section { background: #dee2e6; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        .sapata-input-card { background: #fff; border: 1px solid #ced4da; padding: 15px; border-radius: 8px; margin-bottom: 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 10px; }
        .sapata-input-card::before { content: attr(data-label); font-weight: bold; color: #007bff; grid-column: 1 / -1; }
        label { font-size: 11px; font-weight: bold; color: #495057; }
        input { width: 100%; padding: 8px; border: 1px solid #adb5bd; border-radius: 4px; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-blue { background: #007bff; color: white; }
        .btn-green { background: #28a745; color: white; width: 100%; font-size: 18px; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        th { background-color: #343a40; color: white; padding: 12px; font-size: 13px; }
        td { border: 1px solid #dee2e6; padding: 10px; text-align: center; font-size: 13px; }
        .total-row { background-color: #e9ecef; font-weight: bold; }
        .resumo-final { margin-top: 25px; padding: 20px; background: #d4edda; border-radius: 8px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>Calculadora de Sapatas: Volume e Forma</h2>

    <div class="setup-section">
        <strong>Quantidade de sapatas:</strong>
        <input type="number" id="qtd_sapatas" min="1" value="1" style="width: 70px;">
        <button class="btn btn-blue" onclick="gerarCampos()">Gerar Formulários</button>
    </div>

    <div id="formulario_sapatas"></div>

    <button id="btnCalcular" class="btn btn-green" style="display:none;" onclick="calcularTudo()">Calcular Resultados</button>

    <div id="resultadoArea" style="display:none;">
        <table id="tabelaResultados">
            <thead>
                <tr>
                    <th>Sapata</th>
                    <th>Base (m)</th>
                    <th>Topo (m)</th>
                    <th>Alturas (m)</th>
                    <th>Área de Forma (m²)</th>
                    <th>Volume (m³)</th>
                </tr>
            </thead>
            <tbody id="corpoTabela"></tbody>
        </table>

        <div id="resumoFinal" class="resumo-final">
            <strong>RELATÓRIO TOTAL:</strong><br>
            Área de Forma Total: <span id="areaTotalGeral" style="color:#007bff; font-size: 18px;">0</span> m²<br>
            Volume de Concreto Total: <span id="volTotalGeral" style="color:#28a745; font-size: 18px;">0</span> m³
        </div>
    </div>
</div>

<script>
    function gerarCampos() {
        const qtd = parseInt(document.getElementById('qtd_sapatas').value);
        const container = document.getElementById('formulario_sapatas');
        container.innerHTML = "";

        for (let i = 1; i <= qtd; i++) {
            const card = document.createElement('div');
            card.className = 'sapata-input-card';
            card.setAttribute('data-label', `Sapata ${i}`);
            card.innerHTML = `
                <div><label>Base A</label><input type="number" class="baseA" step="0.01" value="1.20"></div>
                <div><label>Base B</label><input type="number" class="baseB" step="0.01" value="1.20"></div>
                <div><label>Topo a</label><input type="number" class="topoA" step="0.01" value="0.20"></div>
                <div><label>Topo b</label><input type="number" class="topoB" step="0.01" value="0.20"></div>
                <div><label>Rodapé h0</label><input type="number" class="h0" step="0.01" value="0.20"></div>
                <div><label>Total H</label><input type="number" class="H" step="0.01" value="0.60"></div>
            `;
            container.appendChild(card);
        }
        document.getElementById('btnCalcular').style.display = 'block';
    }

    function calcularTudo() {
        const inputs = {
            A: document.querySelectorAll('.baseA'), B: document.querySelectorAll('.baseB'),
            a: document.querySelectorAll('.topoA'), b: document.querySelectorAll('.topoB'),
            h0: document.querySelectorAll('.h0'), H: document.querySelectorAll('.H')
        };
        
        let totalVol = 0, totalArea = 0;
        const corpoTabela = document.getElementById('corpoTabela');
        corpoTabela.innerHTML = "";

        for (let i = 0; i < inputs.A.length; i++) {
            const v = {
                A: parseFloat(inputs.A[i].value), B: parseFloat(inputs.B[i].value),
                a: parseFloat(inputs.a[i].value), b: parseFloat(inputs.b[i].value),
                h0: parseFloat(inputs.h0[i].value), H: parseFloat(inputs.H[i].value)
            };

            const h_pir = v.H - v.h0;
            const s1 = v.A * v.B;
            const s2 = v.a * v.b;

            // Volume
            const vol = (s1 * v.h0) + ((h_pir / 3) * (s1 + s2 + Math.sqrt(s1 * s2)));
            
            // Área de Forma
            const slantA = Math.sqrt(Math.pow(h_pir, 2) + Math.pow((v.B - v.b) / 2, 2));
            const slantB = Math.sqrt(Math.pow(h_pir, 2) + Math.pow((v.A - v.a) / 2, 2));
            const areaBase = 2 * (v.A + v.B) * v.h0;
            const areaInclinada = ((v.A + v.a) * slantA) + ((v.B + v.b) * slantB);
            const areaTotalSapata = areaBase + areaInclinada;

            totalVol += vol;
            totalArea += areaTotalSapata;

            corpoTabela.innerHTML += `
                <tr>
                    <td>Sapata ${i+1}</td>
                    <td>${v.A}x${v.B}</td>
                    <td>${v.a}x${v.b}</td>
                    <td>${v.h0}/${v.H}</td>
                    <td>${areaTotalSapata.toFixed(2)}</td>
                    <td>${vol.toFixed(3)}</td>
                </tr>`;
        }

        document.getElementById('volTotalGeral').innerText = totalVol.toFixed(3);
        document.getElementById('areaTotalGeral').innerText = totalArea.toFixed(2);
        document.getElementById('resultadoArea').style.display = 'block';
        document.getElementById('resumoFinal').style.display = 'block';
    }
</script>
</body>
</html>
